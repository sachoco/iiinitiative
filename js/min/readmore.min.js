!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(l){"use strict";function d(e){var t=e.clone().css({height:"auto",width:e.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(e),i=t.outerHeight(),a=parseInt(t.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),n=e.data("defaultHeight");t.remove();var o=a||e.data("collapsedHeight")||n;e.data({expandedHeight:i,maxHeight:a,collapsedHeight:o}).css({maxHeight:"none"})}function n(e,t){var i,a,n,o,r;this.element=e,this.options=l.extend({},c,t),i=this.options,g[i.selector]||(a=" ",i.embedCSS&&""!==i.blockCSS&&(a+=i.selector+" + [data-readmore-toggle], "+i.selector+"[data-readmore]{"+i.blockCSS+"}"),a+=i.selector+"[data-readmore]{transition: height "+i.speed+"ms;overflow: hidden;}",n=document,o=a,(r=n.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=o:r.appendChild(n.createTextNode(o)),n.getElementsByTagName("head")[0].appendChild(r),g[i.selector]=!0),this._defaults=c,this._name=h,this.init(),window.addEventListener?(window.addEventListener("load",f),window.addEventListener("resize",f)):(window.attachEvent("load",f),window.attachEvent("resize",f))}var a,o,r,s,h="readmore",c={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,beforeToggle:function(){},afterToggle:function(){}},g={},p=0,f=(a=function(){l("[data-readmore]").each(function(){var e=l(this),t="true"===e.attr("aria-expanded");d(e),e.css({height:e.data(t?"expandedHeight":"collapsedHeight")})})},o=100,function(){var e=this,t=arguments,i=r&&!s;clearTimeout(s),s=setTimeout(function(){s=null,r||a.apply(e,t)},o),i&&a.apply(e,t)});n.prototype={init:function(){var t=l(this.element);t.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),d(t);var e=t.data("collapsedHeight"),i=t.data("heightMargin");if(t.outerHeight(!0)<=e+i)return!0;var a,n,o,r=t.attr("id")||(n=++p,String(null==a?"rmjs-":a)+n),s=this.options.startOpen?this.options.lessLink:this.options.moreLink;t.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:r}),t.after(l(s).on("click",(o=this,function(e){o.toggle(this,t[0],e)})).attr({"data-readmore-toggle":"","aria-controls":r})),this.options.startOpen||t.css({height:e})},toggle:function(e,t,i){i&&i.preventDefault(),e=e||l('[aria-controls="'+_this.element.id+'"]')[0],t=t||_this.element;var a,n,o=l(t),r="",s="",d=!1,h=o.data("collapsedHeight");o.height()<=h?(r=o.data("expandedHeight")+"px",s="lessLink",d=!0):(r=h,s="moreLink"),this.options.beforeToggle(e,o,!d),o.css({height:r}),o.on("transitionend",(n=this,function(){n.options.afterToggle(e,o,d),l(this).attr({"aria-expanded":d}).off("transitionend")})),l(e).replaceWith(l(this.options[s]).on("click",(a=this,function(e){a.toggle(this,t,e)})).attr({"data-readmore-toggle":"","aria-controls":o.attr("id")}))},destroy:function(){l(this.element).each(function(){var e=l(this);e.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),e.removeData()})}},l.fn.readmore=function(t){var i=arguments,a=this.selector;return"object"==typeof(t=t||{})?this.each(function(){var e;l.data(this,"plugin_"+h)&&(e=l.data(this,"plugin_"+h)).destroy.apply(e),t.selector=a,l.data(this,"plugin_"+h,new n(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?this.each(function(){var e=l.data(this,"plugin_"+h);e instanceof n&&"function"==typeof e[t]&&e[t].apply(e,Array.prototype.slice.call(i,1))}):void 0}});