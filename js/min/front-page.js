(function(){jQuery(function(e){var t,r,n,o,a,s,l,i,v,u,p,c,d,h,g,C;for(r=null,d=e(".section-wrap"),p=e("section.page"),h=p.clone().addClass("page--clone prev").prependTo(d).toArray(),p=p.addClass("next").toArray(),t=e("section.page"),s=l=0,v=p.length;v>l;s=++l)c=p[s],C=50+100*(s-1),e(c).velocity({translateX:C+"%"},{duration:0,complete:function(t){return e(t).addClass("ready")}});for(s=i=0,u=h.length;u>i;s=++i)c=h[s],C=-150-100*(h.length-1-s),e(c).velocity({translateX:C+"%"},{duration:0,complete:function(t){return e(t).addClass("ready")}});return r=e.inArray(p[0],t),e(t[r]).addClass("current").removeClass("next").removeClass("hover"),a=r,e(document).on("click",".overlay--right",function(){return n()}),e(document).on("click",".overlay--left",function(){return o()}),e(".logo").on("click",function(n){var o,s,l,i,v,u,g,C,f,m,y,x;if(n.preventDefault(),!e(t[r]).hasClass("home")){if(1*t.length/4<=r&&r<=3*t.length/4){if((m=a-r)>0){for(o=0;;)if(e(t[r]).removeClass("current").addClass("prev"),h.push(p.shift()),p.push(h.shift()),e("section.page.prev").first().removeClass("prev").addClass("next").appendTo(d).velocity("stop").velocity({translateX:100*(p.length-1)+50+"%"},{duration:0}),x=t,r++,r>=t.length&&(r=0),o++,o>=m)break;for(l=0,i=x.length;i>l;l++)c=x[l],e(c).velocity({translateX:"-="+100*o+"%"},{duration:1e3});return e(t[r]).addClass("current").removeClass("next").removeClass("hover"),s=e(".page.current").outerHeight(),e(".viewport").velocity({height:s},{duration:1e3})}for(o=0;;)if(e(t[r]).removeClass("current").addClass("next"),h.unshift(p.pop()),e("section.page.next").last().removeClass("next").addClass("prev").prependTo(d).velocity("stop").velocity({translateX:-100*(h.length-1)-150+"%"},{duration:0}),x=t,r--,0>r&&(r=t.length-1),o--,m>=o)break;for(C=0,v=x.length;v>C;C++)c=x[C],e(c).velocity({translateX:"+="+100*-o+"%"},{duration:1e3});return p.unshift(h.pop()),e("section.page.prev").last().removeClass("prev"),e(t[r]).addClass("current").removeClass("prev").removeClass("hover"),s=e(".page.current").outerHeight(),e(".viewport").velocity({height:s},{duration:1e3})}if(r>1*t.length/2){for(m=t.length-r,o=0;;)if(e(t[r]).removeClass("current").addClass("prev"),h.push(p.shift()),p.push(h.shift()),e("section.page.prev").first().removeClass("prev").addClass("next").appendTo(d).velocity("stop").velocity({translateX:100*(p.length-1)+50+"%"},{duration:0}),x=t,r++,r>=t.length&&(r=0),o++,o>=m)break;for(f=0,u=x.length;u>f;f++)c=x[f],e(c).velocity({translateX:"-="+100*o+"%"},{duration:1e3});return e(t[r]).addClass("current").removeClass("next").removeClass("hover"),s=e(".page.current").outerHeight(),e(".viewport").velocity({height:s},{duration:1e3})}for(m=r,o=0;;)if(e(t[r]).removeClass("current").addClass("next"),h.unshift(p.pop()),e("section.page.next").last().removeClass("next").addClass("prev").prependTo(d).velocity("stop").velocity({translateX:-100*(h.length-1)-150+"%"},{duration:0}),x=t,r--,0>r&&(r=t.length-1),o++,m>=o)break;for(y=0,g=x.length;g>y;y++)c=x[y],e(c).velocity({translateX:"+="+100*-o+"%"},{duration:1e3});return p.unshift(h.pop()),e("section.page.prev").last().removeClass("prev"),e(t[r]).addClass("current").removeClass("prev").removeClass("hover"),s=e(".page.current").outerHeight(),e(".viewport").velocity({height:s},{duration:1e3})}}),e(".overlay--right").on({mouseenter:function(){return null!==r?e(p[1]).addClass("hover"):e(p[0]).addClass("hover")},mouseleave:function(){return null!==r?e(p[1]).removeClass("hover"):e(p[0]).removeClass("hover")}}),e(".overlay--left").on({mouseenter:function(){return e(h[h.length-1]).addClass("hover")},mouseleave:function(){return e(h[h.length-1]).removeClass("hover")}}),n=function(){var n,o,a,s;for(null===r?(r=e.inArray(p[0],t),s=p):(e(t[r]).removeClass("current").addClass("prev"),h.push(p.shift()),p.push(h.shift()),e("section.page.prev").first().removeClass("prev").addClass("next").appendTo(d).velocity("stop").velocity({translateX:100*(p.length-1)+50+"%"},{duration:0}),s=t,r++,r>=t.length&&(r=0)),o=0,a=s.length;a>o;o++)c=s[o],e(c).velocity({translateX:"-=100%"},{duration:1e3});return e(t[r]).addClass("current").removeClass("next").removeClass("hover"),n=e(".page.current").outerHeight(),e(".viewport").velocity({height:n},{duration:1e3})},o=function(){var n,o,a,s;for(null===r?(r=e.inArray(p[0],t)-1,s=h):(e(t[r]).removeClass("current").addClass("next"),h.unshift(p.pop()),e("section.page.next").last().removeClass("next").addClass("prev").prependTo(d).velocity("stop").velocity({translateX:-100*(h.length-1)-150+"%"},{duration:0}),s=t,r--,0>r&&(r=t.length-1)),o=0,a=s.length;a>o;o++)c=s[o],e(c).velocity({translateX:"+=100%"},{duration:1e3});return p.unshift(h.pop()),e("section.page.prev").last().removeClass("prev"),e(t[r]).addClass("current").removeClass("prev").removeClass("hover"),n=e(".page.current").outerHeight(),e(".viewport").velocity({height:n},{duration:1e3})},g=function(){var t,r,n;return e(".page.current").length>0&&(t=e(".page.current").outerHeight(),e(".viewport").velocity({height:t},{duration:0})),n=e(window).width(),r=e("section.page").width(),console.log(r),e(".viewport .overlay").width((n-r)/2)},e(window).resize(g),e(document).ready(function(){return g(),this}),this})}).call(this);