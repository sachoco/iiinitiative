(function(){jQuery(function(d){var h,e,t,g,r,n,o,a,s,C,l,i,f=null,m=d(".section-wrap"),y=d("section.page"),x=y.clone().addClass("page--clone prev").prependTo(m).toArray();for(y=y.addClass("next").toArray(),h=d("section.page"),r=n=0,a=y.length;n<a;r=++n)C=y[r],i=50+100*(r-1),d(C).velocity({translateX:i+"%"},{duration:0,complete:function(e){return d(e).addClass("ready")}});for(r=o=0,s=x.length;o<s;r=++o)C=x[r],i=-150-100*(x.length-1-r),d(C).velocity({translateX:i+"%"},{duration:0,complete:function(e){return d(e).addClass("ready")}});return f=d.inArray(y[0],h),d(h[f]).addClass("current").removeClass("next").removeClass("hover"),g=f,d(document).on("click",".overlay--right",function(){return e()}),d(document).on("click",".overlay--left",function(){return t()}),d(".logo").on("click",function(e){var t,r,n,o,a,s,l,i,v,u,p,c;if(e.preventDefault(),!d(h[f]).hasClass("home")){if(h.length/4<=f&&f<=3*h.length/4){if(0<(u=g-f)){for(t=0;d(h[f]).removeClass("current").addClass("prev"),x.push(y.shift()),y.push(x.shift()),d("section.page.prev").first().removeClass("prev").addClass("next").appendTo(m).velocity("stop").velocity({translateX:100*(y.length-1)+50+"%"},{duration:0}),++f>=(c=h).length&&(f=0),!(u<=++t););for(n=0,o=c.length;n<o;n++)C=c[n],d(C).velocity({translateX:"-="+100*t+"%"},{duration:1e3});return d(h[f]).addClass("current").removeClass("next").removeClass("hover"),r=d(".page.current").outerHeight(),d(".viewport").velocity({height:r},{duration:1e3})}for(t=0;d(h[f]).removeClass("current").addClass("next"),x.unshift(y.pop()),d("section.page.next").last().removeClass("next").addClass("prev").prependTo(m).velocity("stop").velocity({translateX:-100*(x.length-1)-150+"%"},{duration:0}),c=h,--f<0&&(f=h.length-1),!(--t<=u););for(i=0,a=c.length;i<a;i++)C=c[i],d(C).velocity({translateX:"+="+100*-t+"%"},{duration:1e3});return y.unshift(x.pop()),d("section.page.prev").last().removeClass("prev"),d(h[f]).addClass("current").removeClass("prev").removeClass("hover"),r=d(".page.current").outerHeight(),d(".viewport").velocity({height:r},{duration:1e3})}if(f>h.length/2){for(u=h.length-f,t=0;d(h[f]).removeClass("current").addClass("prev"),x.push(y.shift()),y.push(x.shift()),d("section.page.prev").first().removeClass("prev").addClass("next").appendTo(m).velocity("stop").velocity({translateX:100*(y.length-1)+50+"%"},{duration:0}),++f>=(c=h).length&&(f=0),!(u<=++t););for(v=0,s=c.length;v<s;v++)C=c[v],d(C).velocity({translateX:"-="+100*t+"%"},{duration:1e3});return d(h[f]).addClass("current").removeClass("next").removeClass("hover"),r=d(".page.current").outerHeight(),d(".viewport").velocity({height:r},{duration:1e3})}for(u=f,t=0;d(h[f]).removeClass("current").addClass("next"),x.unshift(y.pop()),d("section.page.next").last().removeClass("next").addClass("prev").prependTo(m).velocity("stop").velocity({translateX:-100*(x.length-1)-150+"%"},{duration:0}),c=h,--f<0&&(f=h.length-1),!(++t<=u););for(p=0,l=c.length;p<l;p++)C=c[p],d(C).velocity({translateX:"+="+100*-t+"%"},{duration:1e3});return y.unshift(x.pop()),d("section.page.prev").last().removeClass("prev"),d(h[f]).addClass("current").removeClass("prev").removeClass("hover"),r=d(".page.current").outerHeight(),d(".viewport").velocity({height:r},{duration:1e3})}}),d(".overlay--right").on({mouseenter:function(){return null!==f?d(y[1]).addClass("hover"):d(y[0]).addClass("hover")},mouseleave:function(){return null!==f?d(y[1]).removeClass("hover"):d(y[0]).removeClass("hover")}}),d(".overlay--left").on({mouseenter:function(){return d(x[x.length-1]).addClass("hover")},mouseleave:function(){return d(x[x.length-1]).removeClass("hover")}}),e=function(){var e,t,r,n;for(null===f?(f=d.inArray(y[0],h),n=y):(d(h[f]).removeClass("current").addClass("prev"),x.push(y.shift()),y.push(x.shift()),d("section.page.prev").first().removeClass("prev").addClass("next").appendTo(m).velocity("stop").velocity({translateX:100*(y.length-1)+50+"%"},{duration:0}),++f>=(n=h).length&&(f=0)),t=0,r=n.length;t<r;t++)C=n[t],d(C).velocity({translateX:"-=100%"},{duration:1e3});return d(h[f]).addClass("current").removeClass("next").removeClass("hover"),e=d(".page.current").outerHeight(),d(".viewport").velocity({height:e},{duration:1e3})},t=function(){var e,t,r,n;for(null===f?(f=d.inArray(y[0],h)-1,n=x):(d(h[f]).removeClass("current").addClass("next"),x.unshift(y.pop()),d("section.page.next").last().removeClass("next").addClass("prev").prependTo(m).velocity("stop").velocity({translateX:-100*(x.length-1)-150+"%"},{duration:0}),n=h,--f<0&&(f=h.length-1)),t=0,r=n.length;t<r;t++)C=n[t],d(C).velocity({translateX:"+=100%"},{duration:1e3});return y.unshift(x.pop()),d("section.page.prev").last().removeClass("prev"),d(h[f]).addClass("current").removeClass("prev").removeClass("hover"),e=d(".page.current").outerHeight(),d(".viewport").velocity({height:e},{duration:1e3})},l=function(){var e,t,r;return 0<d(".page.current").length&&(e=d(".page.current").outerHeight(),d(".viewport").velocity({height:e},{duration:0})),r=d(window).width(),t=d("section.page").width(),console.log(t),d(".viewport .overlay").width((r-t)/2)},d(window).resize(l),d(document).ready(function(){return l(),this}),this})}).call(this);